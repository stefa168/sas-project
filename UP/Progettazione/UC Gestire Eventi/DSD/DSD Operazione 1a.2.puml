@startuml
skinparam Style strictuml

collections UI
participant "evenManager: EventManager" as em
participant "userMgr: UserManager" as um
participant "event: Event" as ev
participant "service.serviceJobs: ArrayList<serviceJob>" as sj
participant "task.jobs: ArrayList<kitchenJob>" as kj
participant "eventManager.eventReceivers: EventEventReceivers" as eer

UI -> em: cancelEvent(event)
activate em
em -> um: getCurrentUser()
activate um
em <<-- um: user
deactivate um

alt !user.isOrganizer() || event.getMacroEvent().getOrganizer() != user
    UI <<-- em: throw UseCaseLogicException
else
    em -> ev: cancel()
    activate ev
    ev -> ev: this.state = cancel

    loop for all service in event.services
        loop for all serviceJob in service.serviceJobs
            ev -> sj: delete (serviceJob)
            activate sj
            deactivate sj
        end
        loop for all task in service.sheet.tasks
            loop for all kitchenJob in task.jobs
                ev -> kj: delete(kitchenJob)
                activate kj
                deactivate kj
            end
        end
    end

    deactivate ev
    |||
    loop for all receivers in eventReceivers
        em -> eer: updateCancelEvent(event)
        activate eer
        deactivate eer
    end
    |||
    deactivate em
    |||
end
@enduml